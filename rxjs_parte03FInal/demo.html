<!doctype html>
<!-- tomado (y modificado ) de http://alexjmackey.wordpress.com/2013/04/07/intro-to-rxjs/-->
<head>
    <title>JSRxTest</title>
	<script src="lib/rx.js"></script>
	<script>
	  window.onload=function(){
	   function CreateObservable(element, eventType) {
		return Rx.Observable.create(function(observer) {
				function eventHandler (eventObj) {
					observer.onNext(eventObj);
				}
				//keep simple for this example and ignore addEventListener/attachEvent browser differences
				element.addEventListener(eventType, eventHandler);
				return function() {
					element.removeEventListener(eventType, eventHandler);
				};
			});
		};
		var observable= CreateObservable(document.getElementById('button'), 'click')
						.skip(2)
						.take(2)
						.select(function(evt){
						         counter++;
						         return "button was clicked 3 times (next and we are done)"
		});
		var counter=0;
		var texto = document.getElementById("text");
		var observer = Rx.Observer.create(
						//onNext
						function(evt) {
							texto.innerHTML=evt;
						},
						//onError
						function(err) {
							texto.innerHTML='error';
						},
						//onComplete
						function() {
							texto.innerHTML='done'+ ' with clicks=' +counter;
						}
		);
		observable.subscribe(observer);
	 };
	</script>
</head>
<body style="margin-left:20%;">
	<h1>Testing JSRx</h1>
	<button id="button">Click me!</button>
	<span id="text" style="font-size:120%" ></span>
</body>